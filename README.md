# 🚀 ربات تلگرام مدیریت DNS کلادفلر

این پروژه یک ربات تلگرامی قدرتمند و امن برای مدیریت رکوردهای DNS در حساب Cloudflare شماست. با استفاده از این ربات، می‌توانید بدون نیاز به لاگین در وب‌سایت کلادفلر، رکوردهای خود را به سادگی از طریق تلگرام مدیریت کنید. ربات از چندین کاربر با سطوح دسترسی مختلف پشتیبانی می‌کند و تمام فعالیت‌ها را برای بازبینی ثبت می‌کند.

![Badge](https://img.shields.io/badge/Python-3.8+-blue.svg)
![Badge](https://img.shields.io/badge/License-MIT-green.svg)
![Badge](https://img.shields.io/badge/Status-Active-brightgreen.svg)



---

## ✨ ویژگی‌ها

* **مدیریت کامل رکوردها:** افزودن، ویرایش، و حذف رکوردهای `A`, `AAAA`, `CNAME`.
* **کنترل وضعیت پروکسی:** فعال یا غیرفعال کردن ابر نارنجی کلادفلر (Proxy) با یک کلیک.
* **پشتیبانی از چند کاربر:** امکان تعریف چندین کاربر مجاز برای استفاده از ربات.
* **کنترل دسترسی پیشرفته:** تخصیص دسترسی هر کاربر به دامنه‌های مشخص.
* **پنل ادمین قدرتمند:**
    * مشاهده و مدیریت لیست کاربران مجاز (Whitelist).
    * مسدودسازی کاربران (Blacklist).
    * بررسی و مدیریت درخواست‌های دسترسی از کاربران جدید.
* **ثبت لاگ:** تمام فعالیت‌های مهم کاربران در یک فایل لاگ برای نظارت و بازبینی ثبت می‌شود.
* **نصب و مدیریت آسان:** یک اسکریپت نصب هوشمند (`setup.sh`) تمام مراحل نصب، آپدیت و حذف را به صورت خودکار انجام می‌دهد.
* **رابط کاربری ساده:** تمام عملیات‌ها از طریق دکمه‌های شیشه‌ای (Inline Keyboard) در تلگرام انجام می‌شود.

---

## 🔧 پیش‌نیازها

قبل از نصب، مطمئن شوید که موارد زیر را در اختیار دارید:

1.  یک سرور یا VPS (سیستم‌عامل مبتنی بر Debian مانند Ubuntu توصیه می‌شود).
2.  دسترسی `root` یا کاربری با دسترسی `sudo`.
3.  **توکن ربات تلگرام:** از [BotFather](https://t.me/BotFather) دریافت کنید.
4.  **ایمیل حساب کلادفلر:** ایمیلی که با آن در Cloudflare ثبت‌نام کرده‌اید.
5.  **کلید API کلادفلر (Global API Key):** از داشبورد کلادفلر، بخش "My Profile" -> "API Tokens".
6.  **شناسه عددی اکانت تلگرام ادمین:** از ربات‌هایی مانند [userinfobot](https://t.me/userinfobot) دریافت کنید.

---

## ⚙️ نصب و راه‌اندازی

نصب این ربات به لطف اسکریپت هوشمند، بسیار ساده است. تمام مراحل به صورت خودکار انجام می‌شوند.

**1. اتصال به سرور:**
ابتدا از طریق SSH به سرور خود متصل شوید.

**2. دانلود و اجرای اسکریپت:**
دستورات زیر را به ترتیب در ترمینال سرور خود وارد کنید:

```bash
# دانلود اسکریپت نصب
wget -O setup.sh [https://raw.githubusercontent.com/cloudflare-dns-bot/cloudflare_dns_bot/main/setup.sh](https://raw.githubusercontent.com/cloudflare-dns-bot/cloudflare_dns_bot/main/setup.sh)

# دسترسی اجرایی به اسکریپت
chmod +x setup.sh

# اجرای اسکریپت
./setup.sh
```

**3. شروع فرآیند نصب:**
پس از اجرای اسکریپت، منویی به شما نمایش داده می‌شود. گزینه `1` را برای **Install Bot** انتخاب کنید.



اسکریپت به طور خودکار:
* آخرین نسخه پروژه را از گیت‌هاب دانلود می‌کند.
* بسته‌های مورد نیاز سیستم و پایتون را نصب می‌کند.
* اطلاعات لازم (توکن ربات، اطلاعات کلادفلر و شناسه ادمین) را از شما می‌پرسد.
* یک سرویس `systemd` ایجاد می‌کند تا ربات به طور دائم در پس‌زمینه در حال اجرا باشد و در صورت ری‌استارت شدن سرور، به طور خودکار اجرا شود.

پس از اتمام نصب، ربات شما آماده استفاده است!

---

## 📚 نحوه استفاده

1.  به ربات تلگرامی که ساخته‌اید بروید و دستور `/start` را ارسال کنید.
2.  اگر شناسه تلگرام شما با شناسه ادمین که هنگام نصب وارد کرده‌اید یکسان باشد، منوی اصلی مدیریت دامنه‌ها به شما نمایش داده می‌شود.
3.  با انتخاب هر دامنه، می‌توانید لیست رکوردهای آن را مشاهده کرده و آن‌ها را مدیریت کنید.
4.  از منوی ادمین می‌توانید کاربران را مدیریت کرده و لاگ‌ها را مشاهده کنید.

---

## 🔄 بروزرسانی ربات

برای بروزرسانی ربات به آخرین نسخه، کافیست اسکریپت `setup.sh` را دوباره اجرا کرده و گزینه `3` (Update Bot) را انتخاب کنید. اسکریپت به طور خودکار آخرین تغییرات را از گیت‌هاب دریافت کرده، وابستگی‌ها را بروزرسانی کرده و سرویس را ری‌استارت می‌کند.

```bash
./setup.sh
```

---

## 🗑️ حذف ربات

برای حذف کامل ربات و تمام فایل‌های مرتبط با آن، اسکریپت `setup.sh` را اجرا کرده و گزینه `4` (Uninstall Bot) را انتخاب کنید. این عمل سرویس را متوقف و غیرفعال کرده و تمام فایل‌های پروژه را از روی سرور شما پاک می‌کند.

---

## 🤝 مشارکت

از مشارکت شما در این پروژه استقبال می‌شود. اگر پیشنهاد یا ایده‌ای برای بهبود ربات دارید، می‌توانید از طریق بخش **Issues** یا **Pull Requests** در گیت‌هاب اقدام کنید.

## 📜 مجوز (License)

این پروژه تحت مجوز MIT منتشر شده است. برای اطلاعات بیشتر فایل `LICENSE` را مطالعه کنید.
